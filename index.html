<!DOCTYPE html>
<html>
<head>
  <title>Decentralized Chat v2</title>
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gun/lib/webrtc.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gun/lib/radix.js"></script>
  <style>
    /* Updated styles with connection status */
    .status { padding: 8px; margin-bottom: 8px; }
    .connected { background: #dfffdf; border: 1px solid #4CAF50; }
    .disconnected { background: #ffe6e6; border: 1px solid #f44336; }
  </style>
</head>
<body>
  <div id="status" class="status disconnected">ðŸ”´ Connecting...</div>
  <div class="chat-box" id="messages"></div>
  <!-- Rest of UI remains same -->

  <script>
    // Updated with multiple relay options
    const gun = Gun({
      peers: [
        'https://gun-us.herokuapp.com/gun',
        'https://gun-eu.herokuapp.com/gun',
        'https://gun.database.mnetworkwebs.com/gun'
      ],
      localStorage: false
    });

    // Connection status monitoring
    gun.on('hi', peer => {
      document.getElementById('status').className = 'status connected';
      document.getElementById('status').innerHTML = 'ðŸŸ¢ Connected to ' + peer.url;
    });

    gun.on('bye', peer => {
      document.getElementById('status').className = 'status disconnected';
      document.getElementById('status').innerHTML = 'ðŸ”´ Disconnected from ' + peer.url;
    });

    // Rest of chat logic remains same
  </script>
</body>
</html>
